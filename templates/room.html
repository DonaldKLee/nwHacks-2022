
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Room</title>

    <!-- <link rel="stylesheet" href="{{url_for('static', filename="css/room.css")}}"> -->
	<!--Font Awesome-->
	<script src="https://kit.fontawesome.com/ba7447c34f.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<style>
	:root {
    --text-color: #293241;
    --text-highlight: #606080;
    --text-light: #ffffff;
    /* --text-secondary: #aaaaaa; */
    /* --bg-primary: #ddddee; */
	--bg-primary: white;
    --bg-secondary: #eeeeff;
    --bg-darker: #c4c4c8;
    /* --bg-darker: #101014; */
}

body,html {
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    height: 100vh;
    justify-content: space-between;
    /* justify-content: end; */
}

body {
    background-color: var(--bg-primary);
    color: var(--text-color);
    overflow-x: hidden;
    overflow-y: hidden;
}

.row > div {
    /* margin: 0.5rem 0.5rem; */
    /* padding: 0.5rem 0.5rem; */
}


.participants-outer {
    overflow-x: scroll;
    overflow-y: hidden;
    white-space: nowrap;
    padding: 0.5rem 0.5rem;
    background-color: white;
    border-radius: 0.5rem;
    /* margin: 0.5rem 0.5rem; */
	z-index: -2;
}

.participants-list {
    display: inline-flex;
    /* flex-direction: row; */
    /* justify-content: flex-start; */
    flex-wrap: nowrap;
    list-style-type: none;
    padding: 0;
    margin: 0;
	z-index: -2;
}

.participant {
    margin: 0rem 0.25rem;
    text-align: center;
}

.participant-img {
    width: 75px;
    height: 75px;
    border-radius: 50px;
    border: 3px solid var(--bg-darker);
}

.participant-name {

}

.outer-chat-wrapper {
    /* margin: 0.5rem 0.5rem; */
}

.chat-outer {
    overflow-y: scroll;
    background-color: var(--bg-primary);
    height: 54vh;
    margin: 1rem 0rem;
    border-radius: 0.5rem;
	position: relative;
	top: 20px;
}

.chat-list {
    list-style-type: none;
    padding: 0;
    margin: 0;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    background-color: var(--bg-secondary);
}

.chat-text {
    background-color: var(--bg-primary);
    border: 2px solid var(--bg-darker);
    margin-bottom: 0.5rem;
    border-radius: 0.5rem;
    padding: 0.5rem;
}

.chat-text-name {
    color: var(--text-highlight);
    margin-right: 0.25rem;
}

.chat-text-time {
    color: var(--text-secondary);
    font-size: 0.5rem;
}

.chat-text-text {

}

.input-outer {
    border-radius: 0.5rem;
    background-color: var(--bg-secondary);
    padding: 0.5rem;
    display: flex;
    align-items: center;
    height: 10vh;

}

.input-input {
    border-radius: 0.5rem;
    padding: 0.25rem;
    resize: none;
    width: 80%;
    margin-right: 1rem;
}

.input-button {
    width: auto !important;
    height: auto !important;
}


.chat-wrapper {
    margin-top: 3.5rem;
    /* position: absolute;
    bottom: 12vh;
    width: 25%;
    padding: 0rem 1rem; */
    /* margin: 0.5rem 0rem; */
    /* margin: auto; */
}

.chat-toggle {
    background-color: var(--bg-darker);
    display: flex;
    justify-content: space-between;
    padding: 0.5rem 1.5rem;
    margin-top: 1rem;
    border-radius: 0.5rem;
}

.chat-toggle-text {

}

.chat-toggle-button {
    width: 2rem;
}

.chat-toggle-button-line {
    border: 2px solid var(--text-light);
    margin: 25% 0px;
    width: 2rem;
}

.left {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    padding: 0.5rem 1.5rem;
    /* height: 98vh; */
}

.mid {
    display: flex;
    flex-direction: column;
    justify-content: end;
    /* height: 98vh; */
}

.mid-space {
    height: 5vh;
}

.pomodoro-type-controls {
    /* width: 100%; */
    display: flex;
    justify-content: space-evenly;
    font-size: 1.5rem;
}

.pomodoro-type-control {
    /* width: 30rem; */
    /* height: 2rem; */
    padding: 0.25rem 1.5rem;
}

.pomodoro-type-control-selected {
    background-color: #FFB830;
    border-radius: 0.5rem;
}

.pomodoro-timer-outer {
    position: absolute;
    top: 20vh;
    width: 50%;
    text-align: center;
}

.pomodoro-timer {
    font-size: 6.5rem;
}

.pomodoro-timer-controls {
    font-size: 1rem;
    display: flex;
    flex-direction: row;
    justify-content: center;
}

.pomodoro-control {
    margin: 0rem 1rem;
}

.todo-outer {
    position: absolute;
    overflow-y: scroll;
    width: 48%;
    height: 25vh;
    background-color: var(--bg-secondary);
    border-radius: 0.5rem;
    bottom: 7rem;
}

.todo-list {
    list-style-type: none;
}

.todo-item {
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    /* margin-top: 0.5rem; */
}

.todo-item-text {
    margin-left: 1rem;
}

.todo-new {
    margin-top: 0.5rem;
    margin-left: 2rem;
}

.todo-item-complete {
    text-decoration: line-through;
}

.todo-new-input {
    border: none;
    width: 90%;
    border-bottom: 1px solid var(--bg-darker);
    /* background-color: var(--bg-primary); */
    background-color: inherit;
}

.todo-item-delete {
    text-decoration: none !important;
    justify-self: right;
    font-size: 1.5rem;
    padding: 0.5rem;
    cursor:pointer;
}

.number-outer {
    font-size: 3rem;
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    margin: 1.5rem;
    cursor: pointer;
}

.number-helper {
    font-size: 1rem;
}

.applets {

}

.toggles {
    /* justify-self: flex-end; */
    position: absolute;
    width: 100%;
    bottom: 3rem;
}

.toggles > div {
    /* margin: 0.5rem 0.5rem; */
    padding: 0.5rem 1.5rem;
}
.timer {
	font-size: 1em;
}
.timer_btn {
	background: Transparent;
	outline: none;
	border: none;
	transition: 0.3s;
}
.timer_btn:hover {
	transform: scale(1.3);
}
.number-text {
	font-size: 20px;
}

// Added to Test ----------------------------

/* Include the padding and border in an element's total width and height */
* {
  box-sizing: border-box;
}

/* Remove margins and padding from the list */
ul {
  margin: 0;
  padding: 0;
}

/* Style the list items */
ul li {
  cursor: pointer;
  position: relative;
  padding: 12px 8px 12px 40px;
  list-style-type: none;
  background: #eee;
  font-size: 18px;
  transition: 0.2s;
  
  /* make the list items unselectable */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Set all odd list items to a different color (zebra-stripes) */
ul li:nth-child(odd) {
  background: #f9f9f9;
}

/* Darker background-color on hover */
ul li:hover {
  background: #ddd;
}

/* When clicked on, add a background color and strike out text */
ul li.checked {
  background: #888;
  color: #fff;
  text-decoration: line-through;
}

/* Add a "checked" mark when clicked on */
ul li.checked::before {
  content: '';
  position: absolute;
  border-color: #fff;
  border-style: solid;
  border-width: 0 2px 2px 0;
  top: 10px;
  left: 16px;
  transform: rotate(45deg);
  height: 15px;
  width: 7px;
}

/* Style the close button */
.close {
  position: absolute;
  right: 0;
  top: 0;
  padding: 12px 16px 12px 16px;
}

.close:hover {
  background-color: #f44336;
  color: white;
}

/* Style the header */
.header {
  padding: 30px 40px;
  color: white;
  text-align: center;
}

/* Clear floats after the header */
.header:after {
  content: "";
  display: table;
  clear: both;
}

/* Style the input */
input {
  margin: 0;
  border: none;
  border-radius: 0;
  width: 75%;
  padding: 10px;
  float: left;
  font-size: 16px;
}

/* Style the "Add" button */
.addBtn {
  padding: 10px;
  width: 25%;
  background: #d9d9d9;
  color: #555;
  float: left;
  text-align: center;
  font-size: 16px;
  cursor: pointer;
  transition: 0.3s;
  border-radius: 0;
}

.addBtn:hover {
  background-color: #bbb;
}
// End of test -----------------------------
</style>

  </head>
  <body>
        <div class="applets">

      <div class="row">
        <div class="col-md-3 left">
          <!-- participants list -->
          <div style='overflow: hidden; border-radius: 0.5rem;'>
          <div class="participants-outer" style="overflow: auto; background: white;">
			{% for user in room_data.users %}
				<ul class="participants-list">
				<li class="participant">
					<img class="participant-img" src="https://ipcdn.freshop.com/resize?url=https://images.freshop.com/2058325118693671226/33c146e58b560b90cc829063cd8c03a3_large.png&width=256&type=webp&quality=80">
					<br>
					<span class="participant-name">{{user}}</span>
				</li>
				</ul>
			{% endfor %}

          </div></div>


            <div class="chat-wrapper" id="chat" style="margin-top: -30px;">

              <!-- chat -->
              <div class="chat-outer">
                <ul class="chat-list">
                  <li class="chat-text">
                    <span class="chat-text-name">Cheese</span>
                    <span class="chat-text-time">Today at 12:30</span>
                    <br>
                    <span class="chat-text-text">Why did the frog cross the road?</span>
                  </li>
                  <li class="chat-text">
                    <span class="chat-text-name">Nugget</span>
                    <span class="chat-text-time">Today at 12:30</span>
                    <br>
                    <span class="chat-text-text">Why?</span>
                  </li>
                  <li class="chat-text">
                    <span class="chat-text-name">Cheese</span>
                    <span class="chat-text-time">Today at 12:30</span>
                    <br>
                    <span class="chat-text-text">Oh wait, I "frog"ot the answer :)</span>
                  </li>
                  <li class="chat-text">
                    <span class="chat-text-name">Burger</span>
                    <span class="chat-text-time">Today at 12:30</span>
                    <br>
                    <span class="chat-text-text">...</span>
                  </li>
                </ul>
              </div>

              <!-- chat input -->

              <!-- <div class="input-outer">
                <textarea name="" id="" cols="30" rows="2" class="input-input"></textarea>
                <button class="btn btn-secondary input-button"><img src="https://img.icons8.com/ios/50/000000/paper-plane.png"/></button>
              </div> -->

            </div>


        </div>

        <div class="col-md-6 mid">
          <!-- <div class="mid-space"></div> -->
          <!-- pomodoro -->
          <div class="pomodoro-timer-outer">
            <div class="pomodoro-type-controls">
              <div class="pomodoro-type-control pomodoro-type-control-selected" onclick="pomo()" id="type-pom"><span>Pomodoro</span></div>
              <div class="pomodoro-type-control" onclick="short_break()" id="type-short"><span>Short Break</span></div>
              <div class="pomodoro-type-control" onclick="long_break()" id="type-long"><span>Long Break</span></div>
            </div>
            <div class="pomodoro-timer">

              <h1 class="timer"><span id="minutes">25</span>:<span id="seconds">00</span></h1>

			  
            </span>
            <div class="pomodoro-timer-controls">
              <button class="timer_btn" onclick="restart_timer()">
			  	<div class="pomodoro-control"><img style="transform: scaleX(-1) rotate(70deg);" src="https://img.icons8.com/material-outlined/24/000000/restart--v1.png"/></div>
              </button>

              <button class="timer_btn" onclick="start_timer()">
			  	<div class="pomodoro-control"><i class="fas fa-play"></i></div>
              </button>
			  
			  <button class="timer_btn" onclick="pause_timer()">
			  	<div class="pomodoro-control"><img src="https://img.icons8.com/material-outlined/24/000000/pause--v1.png"/></div>
              </button>

              



			  		<!-- <button onclick="restart_timer()"><i class="fas fa-history"></i></button>
					<button onclick="start_timer()"><i class="fas fa-play"></i></button>
					<button onclick="pause_timer()"><i class="fas fa-pause"></i></button> -->
		
            </div>
          </div>

        </div>


        <div class="todo-outer" id="todo">

          <ul class="todo-list">
            <!-- <li class="todo-item">
              <div class="todo-item-left-wrapper">
                <input type="checkbox">
                <span class="todo-item-text">Finish this hecking hackathon</span>
              </div>
              <div class="todo-item-delete">x</div>
            </li>

            <li class="todo-item todo-item-complete">
              <div class="todo-item-left-wrapper">
                <input type="checkbox">
                <span class="todo-item-text">Finish the cookies</span>
              </div>
              <div class="todo-item-delete">x</div>
            </li> -->

        <!-- Original --
            <li class="todo-new">
              	<input id="add_task_input" type="text" class="todo-new-input" placeholder="New task">
				<button onclick="add_task()">Add Task</button>
			</li>
      !-- Original -->
      <!-- Test for adding tasks-->
<div id="myDIV" class="header">
  <input type="text" id="myInput" placeholder="Title...">
  <span onclick="newElement()" class="addBtn">Add Tasks</span>
</div>
<!-- End test- 

<ul id="myUL">

</ul>

          </ul>

        </div>

      </div>

      <div class="col-md-3 right">
        <div class="number-outer" onclick="copy_code()">
          <span class="number-text">Room #: {{room_data.room_code}}</span>
          <span class="number-helper">Click me to copy!</span>

		  <input style="display:none;" type="text" value={{room_data.room_code}} id="code_box_invis">
        </div>
        <!-- room number -->

        <!-- youtube embed -->

        <!-- youtube search -->
      </div>

    </div>

    <div class="row toggles">
      <div class="col-md-3">
        <!-- chat toggle -->
        <div class="chat-toggle" id="chat-toggle">
          <span class="chat-toggle-text">Group Chat</span>
          <!-- <span class="chat-toggle-button">-</span> -->
          <div class="chat-toggle-button">
            <div class="chat-toggle-button-line"></div>
          </div>
        </div>
      </div>

      <div class="col-md-6">
          <div class="todo-toggle-outer" id="todo-toggle">
            <!-- todo toggle -->
            <div class="chat-toggle">
              <span class="chat-toggle-text">To Do</span>
              <div class="chat-toggle-button">
                <div class="chat-toggle-button-line"></div>
              </div>
            </div>
          </div>
      </div>

      <div class="col-md-3" id="video-toggle">
        <div class="chat-toggle">
          <span class="chat-toggle-text">Music</span>
          <div class="chat-toggle-button">
            <div class="chat-toggle-button-line"></div>
          </div>
        </div>
      </div>

    </div>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.7.3/socket.io.min.js"></script>
  <script>
    $("#chat-toggle").click(() => {
    $("#chat").toggle(); 
});


$("#todo-toggle").click( () => {
    $("#todo").toggle(); 
});

$("#video-toggle").click(() => {
    $("#video").toggle(); 
});

selectedType = "#type-pom"


$("#type-pom").click(() => {
    $(".pomodoro-type-control-selected").removeClass("pomodoro-type-control-selected")
    selectedType = "#type-pom";
    $(selectedType).addClass("pomodoro-type-control-selected");
});

$("#type-short").click(() => {
    $(".pomodoro-type-control-selected").removeClass("pomodoro-type-control-selected")
    selectedType = "#type-short";
    $(selectedType).addClass("pomodoro-type-control-selected");
});

$("#type-long").click(() => {
    $(".pomodoro-type-control-selected").removeClass("pomodoro-type-control-selected")
    selectedType = "#type-long";
    $(selectedType).addClass("pomodoro-type-control-selected");
});

$(".number-outer").click(() => {
    		
	var copyText = document.getElementById("code_box_invis");
	copyText.select();
	copyText.setSelectionRange(0, 99999);
	navigator.clipboard.writeText("https://nwhacks-2022.donaldklee.repl.co/room/" + copyText.value);
		
    $(".number-helper").text("Copied!");
    setTimeout(() => {
        $(".number-helper").text("Click me to copy!");
    }, 1500);

})

  </script>

      <div class="col-md-3">
        <!-- room number -->

        <!-- youtube embed -->

		<p>YouTube URL:</p>
		<input id="video_url" style="border: black 2px solid;" type="url" oninput="update_video()"></input>
		<iframe id="video" width="100%" height="auto" src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


        <!-- youtube search -->
      </div>


    </div>
  
	
  
	<script>	
		let pomo_type = "pomo";
		let timer_on = 0; // off

		function pomo() {
			if (pomo_type !== "pomo") {
				document.getElementById("minutes").innerHTML = 25;
				document.getElementById("seconds").innerHTML = "00";
				pomo_type = "pomo";
				pause_timer()
			}
		}

		function long_break() {
			if (pomo_type !== "long") {
				document.getElementById("minutes").innerHTML = 15;
				document.getElementById("seconds").innerHTML = "00";
				pomo_type = "long";
				pause_timer()
			}
		}

		function short_break() {
			if (pomo_type !== "short") {
				document.getElementById("minutes").innerHTML = 5;
				document.getElementById("seconds").innerHTML = "00";
				pomo_type = "short";
				pause_timer()
			}
		}

		function countdown() {
			minutes = document.getElementById("minutes").innerHTML
			seconds = document.getElementById("seconds").innerHTML

			if (seconds <= 00) {
				document.getElementById("minutes").innerHTML -= 1; 
				document.getElementById("seconds").innerHTML = 60;
			}
			if (document.getElementById("seconds").length == 1) {
				document.getElementById("seconds").innerHTML = "0" + document.getElementById("seconds").innerHTML - 1;
			}
			else {
				document.getElementById("seconds").innerHTML -= 1;
			}

			if (minutes == 00 && seconds == 00) {
				alert("timer ended")
				short_break()
				pause_timer()

			}
			timeout = setTimeout(countdown,1000);
		}

		function restart_timer() {
			pause_timer();
			if (pomo_type == "long") {
				document.getElementById("minutes").innerHTML = 15;
				document.getElementById("seconds").innerHTML = "00";
			}
			else if (pomo_type == "short") {
				document.getElementById("minutes").innerHTML = 5;
				document.getElementById("seconds").innerHTML = "00";
			}
			else {
				document.getElementById("minutes").innerHTML = 25;
				document.getElementById("seconds").innerHTML = "00";
			}
		}
		function start_timer() {
			if (!timer_on) {
				timer_on = 1; // on
				countdown()
			}
		}

		function pause_timer() {
			clearTimeout(timeout);
			timer_on = 0;
		}

		function resume_timer() {
			timeout = setTimeout(countdown,1000);
		}

		function update_video() {
			video = document.getElementById("video");

			// https://www.youtube.com/embed/5qap5aO4i9A
			// 	https://www.youtube.com/watch?v=5qap5aO4i9A&ab_channel=LofiGirl

			new_link = document.getElementById("video_url").value.replace(".com/watch?v=", "-nocookie.com/embed/")

			the_new_link = new_link.split("&");

			video.src = the_new_link[0];
		}

  // Test code for adding tasks ------------------
  var myNodelist = document.getElementsByTagName("LI");
  var i;
  for (i = 0; i < myNodelist.length; i++) {
    var span = document.createElement("SPAN");
    var txt = document.createTextNode("\u00D7");
    span.className = "close";
    span.appendChild(txt);
    myNodelist[i].appendChild(span);
  }

// Click on a close button to hide the current list item
  var close = document.getElementsByClassName("close");
  var i;
  for (i = 0; i < close.length; i++) {
    close[i].onclick = function() {
      var div = this.parentElement;
      div.style.display = "none";
    }
  }

  // Add a "checked" symbol when clicking on a list item
  var list = document.querySelector('ul');
  list.addEventListener('click', function(ev) {
    if (ev.target.tagName === 'LI') {
      ev.target.classList.toggle('checked');
    }
  }, false);

    // Create a new list item when clicking on the "Add" button
  function newElement() {
    var li = document.createElement("li");
    var inputValue = document.getElementById("myInput").value;
    var t = document.createTextNode(inputValue);
    li.appendChild(t);
    if (inputValue === '') {
      alert("You must write something!");
    } else {
      document.getElementById("myUL").appendChild(li);
    }
    document.getElementById("myInput").value = "";

    var span = document.createElement("SPAN");
    var txt = document.createTextNode("\u00D7");
    span.className = "close";
    span.appendChild(txt);
    li.appendChild(span);

  for (i = 0; i < close.length; i++) {
    close[i].onclick = function() {
      var div = this.parentElement;
      div.style.display = "none";
    }
  }
}
//End of test --------------------------------
	</script>
<!-- <script type="text/javascript" src="{{url_for('static', filename="javascript/pomodoro.js")}}"></script> -->


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  
  
  </body>
  
</html>
